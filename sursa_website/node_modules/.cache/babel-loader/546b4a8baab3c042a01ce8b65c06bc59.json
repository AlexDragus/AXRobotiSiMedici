{"ast":null,"code":"import React from'react';import ReactDOM from'react-dom';import'./style.css';import RobotInterface from'./RobotInterface';import{createMuiTheme}from'@material-ui/core/styles';import blue from'@material-ui/core/colors/blue';import green from'@material-ui/core/colors/green';import io from\"socket.io-client\";var theme=createMuiTheme({palette:{primary:blue,secondary:green}});ReactDOM.render(/*#__PURE__*/React.createElement(RobotInterface,null),document.getElementById('appbody'));var command_count=0;/*var ws;\nfunction connect_to_server(data){ \n\tws = io('ws://192.168.0.125:8765', {transports: ['websocket']});\n    ws.on('connect', function() {\n        ws.emit('my connect', {data: 'I\\'m connected!'});\n    });     \n}\n\nfunction send_data_to_server(data){\n\t\tws.emit('my moves', data);\n\t\tcommand_count++;\n\t\tif (command_count > 15) {\n\t\t\tconnect_to_server(state);\n\t\t\tcommand_count = 0;\n\t\t}\n}*/var socket;function connect_to_server(data){socket=new WebSocket('ws://192.168.0.125:8765');socket.addEventListener('open',function(event){socket.send('Hello server!');});socket.addEventListener('message',function(event){console.log('Message from server ',event.data);var read=event.data.toString('utf8');//const sensorsInfo = JSON.parse( read.substring(0, read.length-1) );\nvar sensorsInfo=JSON.parse(read);console.log(sensorsInfo);//const sensorsInfo = JSON.parse(event.data);\nupdateSensors(sensorsInfo);});socket.addEventListener('close',function(event){console.log('Connection closed with the server');socket.close();});}function send_data_to_server(data){socket.send(data);}function computeColor(distance){if(distance<150){return\"red\";}else if(distance<500){return\"yellow\";}else return\"green\";}var sensorColor0;var sensorColor1;var sensorColor2;var sensorColor3;var sensorColor4;var sensorColor5;function computeColorDistanceSensors(sensorsInfo){var sensorDistance0=sensorsInfo[\"sensor_0\"];var sensorDistance1=sensorsInfo[\"sensor_1\"];var sensorDistance2=sensorsInfo[\"sensor_2\"];var sensorDistance3=sensorsInfo[\"sensor_3\"];var sensorDistance4=sensorsInfo[\"sensor_4\"];var sensorDistance5=sensorsInfo[\"sensor_5\"];sensorColor0=computeColor(sensorDistance0);sensorColor1=computeColor(sensorDistance1);sensorColor2=computeColor(sensorDistance2);sensorColor3=computeColor(sensorDistance3);sensorColor4=computeColor(sensorDistance4);sensorColor5=computeColor(sensorDistance5);}function updateSensors(sensorsInfo){computeColorDistanceSensors(sensorsInfo);// front ///////////////////////////////////////////////////////////\nif(sensorColor0==\"red\"||sensorColor4==\"red\"){document.getElementById('macheta_senzori_verde_fata').style.opacity=0;document.getElementById('macheta_senzori_galben_fata').style.opacity=0;document.getElementById('macheta_senzori_rosu_fata').style.opacity=1;}else if(sensorColor0==\"yellow\"||sensorColor4==\"yellow\"){document.getElementById('macheta_senzori_verde_fata').style.opacity=0;document.getElementById('macheta_senzori_galben_fata').style.opacity=1;document.getElementById('macheta_senzori_rosu_fata').style.opacity=0;}else{// green\ndocument.getElementById('macheta_senzori_verde_fata').style.opacity=1;document.getElementById('macheta_senzori_galben_fata').style.opacity=0;document.getElementById('macheta_senzori_rosu_fata').style.opacity=0;}// right ///////////////////////////////////////////////////////////\nif(sensorColor1==\"red\"){document.getElementById('macheta_senzori_verde_dreapta').style.opacity=0;document.getElementById('macheta_senzori_galben_dreapta').style.opacity=0;document.getElementById('macheta_senzori_rosu_dreapta').style.opacity=1;}else if(sensorColor1==\"yellow\"){document.getElementById('macheta_senzori_verde_dreapta').style.opacity=0;document.getElementById('macheta_senzori_galben_dreapta').style.opacity=1;document.getElementById('macheta_senzori_rosu_dreapta').style.opacity=0;}else{// green\ndocument.getElementById('macheta_senzori_verde_dreapta').style.opacity=1;document.getElementById('macheta_senzori_galben_dreapta').style.opacity=0;document.getElementById('macheta_senzori_rosu_dreapta').style.opacity=0;}// back ///////////////////////////////////////////////////////////\nif(sensorColor2==\"red\"||sensorColor5==\"red\"){document.getElementById('macheta_senzori_verde_spate').style.opacity=0;document.getElementById('macheta_senzori_galben_spate').style.opacity=0;document.getElementById('macheta_senzori_rosu_spate').style.opacity=1;}else if(sensorColor2==\"yellow\"||sensorColor5==\"yellow\"){document.getElementById('macheta_senzori_verde_spate').style.opacity=0;document.getElementById('macheta_senzori_galben_spate').style.opacity=1;document.getElementById('macheta_senzori_rosu_spate').style.opacity=0;}else{// green\ndocument.getElementById('macheta_senzori_verde_spate').style.opacity=1;document.getElementById('macheta_senzori_galben_spate').style.opacity=0;document.getElementById('macheta_senzori_rosu_spate').style.opacity=0;}// left ///////////////////////////////////////////////////////////\nif(sensorColor3==\"red\"){document.getElementById('macheta_senzori_verde_stanga').style.opacity=0;document.getElementById('macheta_senzori_galben_stanga').style.opacity=0;document.getElementById('macheta_senzori_rosu_stanga').style.opacity=1;}else if(sensorColor3==\"yellow\"){document.getElementById('macheta_senzori_verde_stanga').style.opacity=0;document.getElementById('macheta_senzori_galben_stanga').style.opacity=1;document.getElementById('macheta_senzori_rosu_stanga').style.opacity=0;}else{// green\ndocument.getElementById('macheta_senzori_verde_stanga').style.opacity=1;document.getElementById('macheta_senzori_galben_stanga').style.opacity=0;document.getElementById('macheta_senzori_rosu_stanga').style.opacity=0;}}var prev_state=\"connected\";var state;var keyDownFunction=function keyDownFunction(event){var keycode=event.keyCode?event.keyCode:event.which;console.log(keycode);prev_state=state;/*up*/if(keycode=='38'){state=\"front\";document.getElementById(\"up-arrow\").style.color=\"#34eb71\";}/*right*/if(keycode=='39'){state=\"right\";document.getElementById(\"right-arrow\").style.color=\"#34eb71\";}/*down*/if(keycode=='40'){state=\"back\";document.getElementById(\"down-arrow\").style.color=\"#34eb71\";}/*left*/if(keycode=='37'){state=\"left\";document.getElementById(\"left-arrow\").style.color=\"#34eb71\";}/*stop - spacebar*/if(keycode=='32'){state=\"stop\";document.getElementById(\"space-arrow\").style.color=\"#ff0000\";}if(prev_state!=state){console.log(state);send_data_to_server(state);}};var keyUpFunction=function keyUpFunction(event){var keycode=event.keyCode?event.keyCode:event.which;console.log(keycode);prev_state=state;/*up*/if(keycode=='38'){state=\"stop\";document.getElementById(\"up-arrow\").style.color=\"#000000\";}/*right*/if(keycode=='39'){state=\"stop\";document.getElementById(\"right-arrow\").style.color=\"#000000\";}/*down*/if(keycode=='40'){state=\"stop\";document.getElementById(\"down-arrow\").style.color=\"#000000\";}/*left*/if(keycode=='37'){state=\"stop\";document.getElementById(\"left-arrow\").style.color=\"#000000\";}/*stop - spacebar*/if(keycode=='32'){state=\"stop\";document.getElementById(\"space-arrow\").style.color=\"#000000\";}state=\"stop\";console.log(state);send_data_to_server(state);};console.log(\"websockets connected\");connect_to_server(\"websockets connected\");document.addEventListener(\"keydown\",keyDownFunction,false);document.addEventListener(\"keyup\",keyUpFunction,false);","map":{"version":3,"sources":["/home/alexdragus14/Desktop/website_robot_spital/src/index.js"],"names":["React","ReactDOM","RobotInterface","createMuiTheme","blue","green","io","theme","palette","primary","secondary","render","document","getElementById","command_count","socket","connect_to_server","data","WebSocket","addEventListener","event","send","console","log","read","toString","sensorsInfo","JSON","parse","updateSensors","close","send_data_to_server","computeColor","distance","sensorColor0","sensorColor1","sensorColor2","sensorColor3","sensorColor4","sensorColor5","computeColorDistanceSensors","sensorDistance0","sensorDistance1","sensorDistance2","sensorDistance3","sensorDistance4","sensorDistance5","style","opacity","prev_state","state","keyDownFunction","keycode","keyCode","which","color","keyUpFunction"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style.css';\nimport RobotInterface from './RobotInterface';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport blue from '@material-ui/core/colors/blue';\nimport green from '@material-ui/core/colors/green';\nimport io from \"socket.io-client\"\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: blue,\n    secondary: green,\n  },\n});\n\nReactDOM.render(<RobotInterface />, document.getElementById('appbody'));\n\nvar command_count = 0;\n/*var ws;\nfunction connect_to_server(data){ \n\tws = io('ws://192.168.0.125:8765', {transports: ['websocket']});\n    ws.on('connect', function() {\n        ws.emit('my connect', {data: 'I\\'m connected!'});\n    });     \n}\n\nfunction send_data_to_server(data){\n\t\tws.emit('my moves', data);\n\t\tcommand_count++;\n\t\tif (command_count > 15) {\n\t\t\tconnect_to_server(state);\n\t\t\tcommand_count = 0;\n\t\t}\n}*/\n\nvar socket;\nfunction connect_to_server(data){\n\tsocket = new WebSocket('ws://192.168.0.125:8765');\n\tsocket.addEventListener('open', function (event) {\n    \tsocket.send('Hello server!');\n\t});\n\n\tsocket.addEventListener('message', function (event) {\n\t    console.log('Message from server ', event.data);\n\t    const read = event.data.toString('utf8');\n\t    //const sensorsInfo = JSON.parse( read.substring(0, read.length-1) );\n\n\t\tvar sensorsInfo = JSON.parse(read);\n\t    console.log(sensorsInfo);\n\t    //const sensorsInfo = JSON.parse(event.data);\n\t    updateSensors(sensorsInfo);\n\t});\n\n\tsocket.addEventListener('close', function (event) {\n\t    console.log('Connection closed with the server');\n\t    socket.close();\n\t});\n}\n\nfunction send_data_to_server(data){\n\tsocket.send(data);\n}\n\nfunction computeColor(distance){\n\tif (distance < 150) {\n\t\treturn \"red\";\n\t} else if (distance < 500) {\n\t\treturn \"yellow\";\n\t} else\n\t\treturn \"green\";\n}\n\nvar sensorColor0;\nvar sensorColor1;\nvar sensorColor2;\nvar sensorColor3;\nvar sensorColor4;\nvar sensorColor5;\n\nfunction computeColorDistanceSensors(sensorsInfo) {\n\tvar sensorDistance0 = sensorsInfo[\"sensor_0\"];\n\tvar sensorDistance1 = sensorsInfo[\"sensor_1\"];\n\tvar sensorDistance2 = sensorsInfo[\"sensor_2\"];\n\tvar sensorDistance3 = sensorsInfo[\"sensor_3\"];\n\tvar sensorDistance4 = sensorsInfo[\"sensor_4\"];\n\tvar sensorDistance5 = sensorsInfo[\"sensor_5\"];\n\tsensorColor0 = computeColor(sensorDistance0);\n\tsensorColor1 = computeColor(sensorDistance1);\n\tsensorColor2 = computeColor(sensorDistance2);\n\tsensorColor3 = computeColor(sensorDistance3);\n\tsensorColor4 = computeColor(sensorDistance4);\n\tsensorColor5 = computeColor(sensorDistance5);\n}\n\nfunction  updateSensors(sensorsInfo){\n\n\tcomputeColorDistanceSensors(sensorsInfo);\n\n\t// front ///////////////////////////////////////////////////////////\n\tif (sensorColor0 == \"red\" || sensorColor4 == \"red\") {\n\t\tdocument.getElementById('macheta_senzori_verde_fata').style.opacity = 0;\n\t\tdocument.getElementById('macheta_senzori_galben_fata').style.opacity = 0;\n\t\tdocument.getElementById('macheta_senzori_rosu_fata').style.opacity = 1;\n\t} else if (sensorColor0 == \"yellow\" || sensorColor4 == \"yellow\") {\n\t\tdocument.getElementById('macheta_senzori_verde_fata').style.opacity = 0;\n\t\tdocument.getElementById('macheta_senzori_galben_fata').style.opacity = 1;\n\t\tdocument.getElementById('macheta_senzori_rosu_fata').style.opacity = 0;\n\t} else { // green\n\t\tdocument.getElementById('macheta_senzori_verde_fata').style.opacity = 1;\n\t\tdocument.getElementById('macheta_senzori_galben_fata').style.opacity = 0;\n\t\tdocument.getElementById('macheta_senzori_rosu_fata').style.opacity = 0;\n\t}\n\t// right ///////////////////////////////////////////////////////////\n\tif (sensorColor1 == \"red\") {\n\t\tdocument.getElementById('macheta_senzori_verde_dreapta').style.opacity = 0;\n\t\tdocument.getElementById('macheta_senzori_galben_dreapta').style.opacity = 0;\n\t\tdocument.getElementById('macheta_senzori_rosu_dreapta').style.opacity = 1;\n\t} else if (sensorColor1 == \"yellow\") {\n\t\tdocument.getElementById('macheta_senzori_verde_dreapta').style.opacity = 0;\n\t\tdocument.getElementById('macheta_senzori_galben_dreapta').style.opacity = 1;\n\t\tdocument.getElementById('macheta_senzori_rosu_dreapta').style.opacity = 0;\n\t} else { // green\n\t\tdocument.getElementById('macheta_senzori_verde_dreapta').style.opacity = 1;\n\t\tdocument.getElementById('macheta_senzori_galben_dreapta').style.opacity = 0;\n\t\tdocument.getElementById('macheta_senzori_rosu_dreapta').style.opacity = 0;\n\t}\n\t// back ///////////////////////////////////////////////////////////\n\tif (sensorColor2 == \"red\" || sensorColor5 == \"red\") {\n\t\tdocument.getElementById('macheta_senzori_verde_spate').style.opacity = 0;\n\t\tdocument.getElementById('macheta_senzori_galben_spate').style.opacity = 0;\n\t\tdocument.getElementById('macheta_senzori_rosu_spate').style.opacity = 1;\n\t} else if (sensorColor2 == \"yellow\" || sensorColor5 == \"yellow\") {\n\t\tdocument.getElementById('macheta_senzori_verde_spate').style.opacity = 0;\n\t\tdocument.getElementById('macheta_senzori_galben_spate').style.opacity = 1;\n\t\tdocument.getElementById('macheta_senzori_rosu_spate').style.opacity = 0;\n\t} else { // green\n\t\tdocument.getElementById('macheta_senzori_verde_spate').style.opacity = 1;\n\t\tdocument.getElementById('macheta_senzori_galben_spate').style.opacity = 0;\n\t\tdocument.getElementById('macheta_senzori_rosu_spate').style.opacity = 0;\n\t}\n\t// left ///////////////////////////////////////////////////////////\n\tif (sensorColor3 == \"red\") {\n\t\tdocument.getElementById('macheta_senzori_verde_stanga').style.opacity = 0;\n\t\tdocument.getElementById('macheta_senzori_galben_stanga').style.opacity = 0;\n\t\tdocument.getElementById('macheta_senzori_rosu_stanga').style.opacity = 1;\n\t} else if (sensorColor3 == \"yellow\") {\n\t\tdocument.getElementById('macheta_senzori_verde_stanga').style.opacity = 0;\n\t\tdocument.getElementById('macheta_senzori_galben_stanga').style.opacity = 1;\n\t\tdocument.getElementById('macheta_senzori_rosu_stanga').style.opacity = 0;\n\t} else { // green\n\t\tdocument.getElementById('macheta_senzori_verde_stanga').style.opacity = 1;\n\t\tdocument.getElementById('macheta_senzori_galben_stanga').style.opacity = 0;\n\t\tdocument.getElementById('macheta_senzori_rosu_stanga').style.opacity = 0;\n\t}\n}\n\nvar prev_state = \"connected\";\nvar state;\nconst keyDownFunction = function(event) {\n\tvar keycode = (event.keyCode ? event.keyCode : event.which);\n\tconsole.log(keycode);\n\tprev_state = state;\n\t/*up*/\n\tif (keycode == '38'){\n\t\tstate = \"front\";\n\t\tdocument.getElementById(\"up-arrow\").style.color = \"#34eb71\";\n\t}\n\n\t/*right*/\n\tif (keycode == '39'){\n\t\tstate = \"right\";\n\t\tdocument.getElementById(\"right-arrow\").style.color = \"#34eb71\";\n\t}\n\n\t/*down*/\n\tif (keycode == '40'){\n\t\tstate = \"back\";\n\t\tdocument.getElementById(\"down-arrow\").style.color = \"#34eb71\";\n\t}\n\n\t/*left*/\n\tif (keycode == '37'){ \n\t\tstate = \"left\";\n\t\tdocument.getElementById(\"left-arrow\").style.color = \"#34eb71\";\n\t}\n\n\t/*stop - spacebar*/\n\tif (keycode == '32'){\n\t\tstate = \"stop\";\n\t\tdocument.getElementById(\"space-arrow\").style.color = \"#ff0000\";\n\t}\n\n\tif (prev_state != state) {\n\t\tconsole.log(state);\n\t\tsend_data_to_server(state);\n\t}\n}\n\nconst keyUpFunction = function(event) {\n\tvar keycode = (event.keyCode ? event.keyCode : event.which);\n\tconsole.log(keycode);\n\tprev_state = state;\n\t/*up*/\n\tif (keycode == '38'){\n\t\tstate = \"stop\";\n\t\tdocument.getElementById(\"up-arrow\").style.color = \"#000000\";\n\t}\n\n\t/*right*/\n\tif (keycode == '39'){\n\t\tstate = \"stop\";\n\t\tdocument.getElementById(\"right-arrow\").style.color = \"#000000\";\n\t}\n\n\t/*down*/\n\tif (keycode == '40'){\n\t\tstate = \"stop\";\n\t\tdocument.getElementById(\"down-arrow\").style.color = \"#000000\";\n\t}\n\n\t/*left*/\n\tif (keycode == '37'){ \n\t\tstate = \"stop\";\n\t\tdocument.getElementById(\"left-arrow\").style.color = \"#000000\";\n\t}\n\n\t/*stop - spacebar*/\n\tif (keycode == '32'){\n\t\tstate = \"stop\";\n\t\tdocument.getElementById(\"space-arrow\").style.color = \"#000000\";\n\t}\n\t\tstate = \"stop\";\n\n\tconsole.log(state);\n\tsend_data_to_server(state);\n}\n\nconsole.log(\"websockets connected\");\nconnect_to_server(\"websockets connected\");\ndocument.addEventListener(\"keydown\", keyDownFunction, false);\ndocument.addEventListener(\"keyup\", keyUpFunction, false);"]},"metadata":{},"sourceType":"module"}